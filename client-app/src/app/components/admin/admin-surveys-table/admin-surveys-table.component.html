<mat-accordion>
  <mat-expansion-panel
    expanded="true"
    (opened)="handleOpenPanel()"
    (closed)="panelOpenState = false"
    #matExpansionPanel
  >
    <mat-expansion-panel-header>
      <mat-panel-title>
        <h2>Questionnaires</h2>
      </mat-panel-title>
    </mat-expansion-panel-header>

    <clr-datagrid (clrDgRefresh)="refresh($event)" [clrDgLoading]="loading">
      <clr-dg-column [clrDgField]="'name'">Nom</clr-dg-column>

      <clr-dg-column [clrDgField]="'pokemon'">Description</clr-dg-column>

      <clr-dg-column [clrDgField]="'pokemon'"
        >Nombre de questions</clr-dg-column
      >
      <clr-dg-column [clrDgField]="'pokemon'">Statut</clr-dg-column>

      <clr-dg-row *ngFor="let survey of surveys">
        <clr-dg-action-overflow>
          <button
            (click)="handleEditSurvey(survey.survey_id)"
            class="action-item"
          >
            Modifier
          </button>
          <button
            class="action-item"
            (click)="handleViewQuestions(survey.survey_id)"
          >
            Voir les questions
          </button>
        </clr-dg-action-overflow>
        <clr-dg-cell class="tw-font-bold">{{ survey.name }}</clr-dg-cell>

        <clr-dg-cell class="tw-font-bold">{{ survey.description }}</clr-dg-cell>
        <clr-dg-cell class="tw-font-bold">{{
          survey.questionCount
        }}</clr-dg-cell>
        <clr-dg-cell class="tw-font-bold"
          >{{ survey.status === "active" ? "actif" : "inactif" }}
          <span class="tw-inline-block" *ngIf="survey.status !== 'active'">
            <mat-icon class="tw-translate-y-1" color="accent">warning</mat-icon>
          </span>
        </clr-dg-cell>
      </clr-dg-row>

      <clr-dg-footer>
        <span class="tw-text-white">
          {{ pagination.firstItem + 1 }} - {{ pagination.lastItem + 1 }} de
          {{ total }} questionnaires
        </span>
        <clr-dg-pagination
          #pagination
          [clrDgTotalItems]="total"
        ></clr-dg-pagination>
      </clr-dg-footer>
    </clr-datagrid>
  </mat-expansion-panel>
</mat-accordion>
